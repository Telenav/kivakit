<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1805.2083px" preserveAspectRatio="none" style="width:1554px;height:1805px;background:#333333;" version="1.1" viewBox="0 0 1554 1805" width="1554.1667px" zoomAndPan="magnify"><defs/><g><rect fill="#48494B" height="41.2028" rx="8.3333" ry="8.3333" style="stroke:#545454;stroke-width:1.0416666666666667;" width="236.4583" x="660.4167" y="14.5833"/><text fill="#C0C0C0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="20.8333" lengthAdjust="spacing" textLength="213.5417" x="671.875" y="43.0583">Load Service Provider</text><rect fill="#3A3A3A" height="302.124" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="309.8958" y="242.3584"/><rect fill="#3A3A3A" height="694.4112" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="520.8333" y="580.0374"/><rect fill="#3A3A3A" height="384.9935" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="520.8333" y="1310.0037"/><rect fill="#3A3A3A" height="644.2729" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="733.3333" y="615.5924"/><rect fill="#3A3A3A" height="242.7734" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="733.3333" y="1345.5587"/><rect fill="#3A3A3A" height="95.6462" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="958.3333" y="651.1475"/><rect fill="#3A3A3A" height="35.555" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="958.3333" y="1416.807"/><rect fill="#3A3A3A" height="419.9483" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1183.3333" y="818.042"/><rect fill="#3A3A3A" height="354.185" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1188.5417" y="861.9303"/><rect fill="#3A3A3A" height="227.4963" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1193.75" y="911.027"/><rect fill="#3A3A3A" height="61.735" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1198.9583" y="1027.6917"/><rect fill="#3A3A3A" height="35.555" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1183.3333" y="1530.9021"/><rect fill="#3A3A3A" height="35.555" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1432.8125" y="1623.8871"/><rect fill="#333333" height="483.905" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:2.0833333333333335;" width="925" x="622.9167" y="762.4186"/><rect fill="#333333" height="99.5117" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:2.0833333333333335;" width="460.4167" x="622.9167" y="1361.1837"/><rect fill="#333333" height="99.5117" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:2.0833333333333335;" width="681.25" x="622.9167" y="1475.2787"/><line style="stroke:#484848;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="32.2917" x2="32.2917" y1="155.2531" y2="1713.7472"/><line style="stroke:#484848;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="314.5833" x2="314.5833" y1="200.8199" y2="1713.7472"/><line style="stroke:#484848;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="526.0417" x2="526.0417" y1="494.3563" y2="1713.7472"/><line style="stroke:#484848;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="738.5417" x2="738.5417" y1="427.714" y2="1713.7472"/><line style="stroke:#484848;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="963.5417" x2="963.5417" y1="294.4295" y2="1713.7472"/><line style="stroke:#484848;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="1188.5417" x2="1188.5417" y1="361.0718" y2="1713.7472"/><line style="stroke:#484848;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="1437.5" x2="1437.5" y1="1189.2985" y2="1713.7472"/><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="41.6667" x="8.3333" y="149.0519">Client</text><ellipse cx="32.2917" cy="76.6195" fill="#484848" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:2.0833333333333335;"/><path d="M32.2917,84.9528 L32.2917,113.0778 M18.75,93.2861 L45.8333,93.2861 M32.2917,113.0778 L18.75,128.7028 M32.2917,113.0778 L45.8333,128.7028 " fill="none" style="stroke:#484848;stroke-width:2.0833333333333335;"/><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="41.6667" x="8.3333" y="1729.9296">Client</text><ellipse cx="32.2917" cy="1746.5474" fill="#484848" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:2.0833333333333335;"/><path d="M32.2917,1754.8808 L32.2917,1783.0058 M18.75,1763.2141 L45.8333,1763.2141 M32.2917,1783.0058 L18.75,1798.6308 M32.2917,1783.0058 L45.8333,1798.6308 " fill="none" style="stroke:#484848;stroke-width:2.0833333333333335;"/><rect fill="#484848" height="38.0086" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="123.9583" x="253.125" y="1712.7055"/><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="103.125" x="263.5417" y="1737.2213">:ServiceLoader</text><rect fill="#484848" height="55.1839" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="110.4167" x="470.8333" y="1712.7055"/><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="89.5833" x="481.25" y="1737.2213">:Anonymous</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="53.125" x="499.4792" y="1754.3966">Iterator</text><rect fill="#484848" height="55.1839" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="127.0833" x="675" y="1712.7055"/><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="89.5833" x="693.75" y="1737.2213">:Anonymous</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="106.25" x="685.4167" y="1754.3966">LookupIterator</text><rect fill="#484848" height="55.1839" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="135.4167" x="895.8333" y="1712.7055"/><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="114.5833" x="906.25" y="1737.2213">:ModuleServices</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="106.25" x="910.4167" y="1754.3966">LookupIterator</text><rect fill="#484848" height="55.1839" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="127.0833" x="1125" y="1712.7055"/><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="104.1667" x="1136.4583" y="1737.2213">:LazyClassPath</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="106.25" x="1135.4167" y="1754.3966">LookupIterator</text><rect fill="#484848" height="38.0086" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="115.625" x="1380.2083" y="1712.7055"/><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="94.7917" x="1390.625" y="1737.2213">:ProviderImpl</text><rect fill="#3A3A3A" height="302.124" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="309.8958" y="242.3584"/><rect fill="#3A3A3A" height="694.4112" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="520.8333" y="580.0374"/><rect fill="#3A3A3A" height="384.9935" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="520.8333" y="1310.0037"/><rect fill="#3A3A3A" height="644.2729" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="733.3333" y="615.5924"/><rect fill="#3A3A3A" height="242.7734" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="733.3333" y="1345.5587"/><rect fill="#3A3A3A" height="95.6462" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="958.3333" y="651.1475"/><rect fill="#3A3A3A" height="35.555" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="958.3333" y="1416.807"/><rect fill="#3A3A3A" height="419.9483" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1183.3333" y="818.042"/><rect fill="#3A3A3A" height="354.185" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1188.5417" y="861.9303"/><rect fill="#3A3A3A" height="227.4963" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1193.75" y="911.027"/><rect fill="#3A3A3A" height="61.735" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1198.9583" y="1027.6917"/><rect fill="#3A3A3A" height="35.555" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1183.3333" y="1530.9021"/><rect fill="#3A3A3A" height="35.555" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1432.8125" y="1623.8871"/><polygon fill="#545454" points="240.625,188.7248,251.0417,192.8914,240.625,197.0581,244.7917,192.8914" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="32.2917" x2="246.875" y1="192.8914" y2="192.8914"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="28.125" x="42.7083" y="185.0464">load</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="119.7917" x="70.8333" y="185.0464">(serviceTypeClass)</text><rect fill="#484848" height="38.0086" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="123.9583" x="253.125" y="165.6698"/><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="103.125" x="263.5417" y="190.1855">:ServiceLoader</text><polygon fill="#545454" points="297.3958,238.1917,307.8125,242.3584,297.3958,246.5251,301.5625,242.3584" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="32.2917" x2="303.6458" y1="242.3584" y2="242.3584"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="56.25" x="42.7083" y="234.5133">iterator()</text><polygon fill="#545454" points="883.3333,252.7751,893.75,256.9417,883.3333,261.1084,887.5,256.9417" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="320.3125" x2="889.5833" y1="256.9417" y2="256.9417"/><rect fill="#484848" height="55.1839" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="135.4167" x="895.8333" y="250.6917"/><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="114.5833" x="906.25" y="275.2075">:ModuleServices</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="106.25" x="910.4167" y="292.3828">LookupIterator</text><polygon fill="#545454" points="1112.5,319.4173,1122.9167,323.584,1112.5,327.7507,1116.6667,323.584" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="320.3125" x2="1118.75" y1="323.584" y2="323.584"/><rect fill="#484848" height="55.1839" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="127.0833" x="1125" y="317.334"/><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="104.1667" x="1136.4583" y="341.8498">:LazyClassPath</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="106.25" x="1135.4167" y="359.0251">LookupIterator</text><polygon fill="#545454" points="662.5,421.7529,672.9167,425.9196,662.5,430.0863,666.6667,425.9196" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="320.3125" x2="668.75" y1="425.9196" y2="425.9196"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="231.25" x="330.7292" y="403.3529">new(moduleServicesLookupIterator,</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="190.625" x="359.8958" y="418.0745">lazyClassPathLookupIterator)</text><rect fill="#484848" height="55.1839" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="127.0833" x="675" y="383.9762"/><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="89.5833" x="693.75" y="408.492">:Anonymous</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="106.25" x="685.4167" y="425.6673">LookupIterator</text><polygon fill="#545454" points="458.3333,452.7018,468.75,456.8685,458.3333,461.0352,462.5,456.8685" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="320.3125" x2="464.5833" y1="456.8685" y2="456.8685"/><rect fill="#484848" height="55.1839" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="110.4167" x="470.8333" y="450.6185"/><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="89.5833" x="481.25" y="475.1343">:Anonymous</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="53.125" x="499.4792" y="492.3096">Iterator</text><polygon fill="#545454" points="43.75,540.3158,33.3333,544.4824,43.75,548.6491,39.5833,544.4824" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="37.5" x2="314.0625" y1="544.4824" y2="544.4824"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="47.9167" x="53.125" y="536.6374">iterator</text><polygon fill="#545454" points="508.3333,575.8708,518.75,580.0374,508.3333,584.2041,512.5,580.0374" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="32.2917" x2="514.5833" y1="580.0374" y2="580.0374"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="60.4167" x="42.7083" y="572.1924">hasNext()</text><polygon fill="#545454" points="720.8333,611.4258,731.25,615.5924,720.8333,619.7591,725,615.5924" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="531.25" x2="727.0833" y1="615.5924" y2="615.5924"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="60.4167" x="541.6667" y="607.7474">hasNext()</text><polygon fill="#545454" points="945.8333,646.9808,956.25,651.1475,945.8333,655.3141,950,651.1475" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="743.75" x2="952.0833" y1="651.1475" y2="651.1475"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="60.4167" x="754.1667" y="643.3024">hasNext()</text><path d="M973.9583,673.0225 L973.9583,726.1475 A8.3333,8.3333 0 0 0 982.2917,734.4808 L1315.625,734.4808 A8.3333,8.3333 0 0 0 1323.9583,726.1475 L1323.9583,675.1058 L1313.5417,664.6891 L982.2917,664.6891 A8.3333,8.3333 0 0 0 973.9583,673.0225 " fill="#1B1B1A" style="stroke:#5E5E5E;stroke-width:1.0416666666666667;"/><path d="M1313.5417,664.6891 L1313.5417,670.9391 A4.1667,4.1667 0 0 0 1317.7083,675.1058 L1323.9583,675.1058 L1313.5417,664.6891 " fill="#1B1B1A" style="stroke:#5E5E5E;stroke-width:1.0416666666666667;"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="276.0417" x="983.3333" y="684.1003">find service provider from catalog of ClassLoader</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="321.875" x="983.3333" y="697.5952">{AppClassLoader, PlatformClassLoader, BootClassLoader}</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="0" x="986.4583" y="711.0901"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="148.9583" x="983.3333" y="724.585">if found, load nextProvider</text><polygon fill="#545454" points="755.2083,742.627,744.7917,746.7936,755.2083,750.9603,751.0417,746.7936" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="748.9583" x2="962.5" y1="746.7936" y2="746.7936"/><path d="M631.25,762.4186 L692.7083,762.4186 L692.7083,774.9186 L682.2917,785.3353 L622.9167,785.3353 L622.9167,770.752 " fill="#484848" style="stroke:#484848;stroke-width:1.0416666666666667;"/><rect fill="none" height="483.905" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:2.0833333333333335;" width="925" x="622.9167" y="762.4186"/><text fill="#0060A8" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="641.6667" y="778.6702">alt</text><text fill="#3380B9" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="185.4167" x="711.4583" y="779.7119">[no next in ModulesServices]</text><polygon fill="#545454" points="1170.8333,813.8753,1181.25,818.042,1170.8333,822.2087,1175,818.042" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="743.75" x2="1177.0833" y1="818.042" y2="818.042"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="60.4167" x="754.1667" y="810.1969">hasNext()</text><line style="stroke:#545454;stroke-width:1.5625;" x1="1193.75" x2="1242.7083" y1="848.3887" y2="848.3887"/><line style="stroke:#545454;stroke-width:1.5625;" x1="1242.7083" x2="1242.7083" y1="848.3887" y2="861.9303"/><line style="stroke:#545454;stroke-width:1.5625;" x1="1200" x2="1242.7083" y1="861.9303" y2="861.9303"/><polygon fill="#545454" points="1210.4167,857.7637,1200,861.9303,1210.4167,866.097,1206.25,861.9303" style="stroke:#545454;stroke-width:1.0416666666666667;"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="105.2083" x="1209.375" y="840.5436">hasNextService()</text><line style="stroke:#545454;stroke-width:1.5625;" x1="1198.9583" x2="1247.9167" y1="897.4854" y2="897.4854"/><line style="stroke:#545454;stroke-width:1.5625;" x1="1247.9167" x2="1247.9167" y1="897.4854" y2="911.027"/><line style="stroke:#545454;stroke-width:1.5625;" x1="1205.2083" x2="1247.9167" y1="911.027" y2="911.027"/><polygon fill="#545454" points="1215.625,906.8604,1205.2083,911.027,1215.625,915.1937,1211.4583,911.027" style="stroke:#545454;stroke-width:1.0416666666666667;"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="125" x="1214.5833" y="889.6403">nextProviderClass()</text><path d="M1209.375,938.1104 L1209.375,977.6937 A8.3333,8.3333 0 0 0 1217.7083,986.027 L1456.25,986.027 A8.3333,8.3333 0 0 0 1464.5833,977.6937 L1464.5833,940.1937 L1454.1667,929.777 L1217.7083,929.777 A8.3333,8.3333 0 0 0 1209.375,938.1104 " fill="#1B1B1A" style="stroke:#5E5E5E;stroke-width:1.0416666666666667;"/><path d="M1454.1667,929.777 L1454.1667,936.027 A4.1667,4.1667 0 0 0 1458.3333,940.1937 L1464.5833,940.1937 L1454.1667,929.777 " fill="#1B1B1A" style="stroke:#5E5E5E;stroke-width:1.0416666666666667;"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="86.4583" x="1218.75" y="949.1882">[configs is null]</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="122.9167" x="1218.75" y="962.6831">serviceLoader.configs</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="214.5833" x="1231.25" y="976.178">= classLoader.getResource(configFile)</text><line style="stroke:#545454;stroke-width:1.5625;" x1="1204.1667" x2="1253.125" y1="1014.15" y2="1014.15"/><line style="stroke:#545454;stroke-width:1.5625;" x1="1253.125" x2="1253.125" y1="1014.15" y2="1027.6917"/><line style="stroke:#545454;stroke-width:1.5625;" x1="1210.4167" x2="1253.125" y1="1027.6917" y2="1027.6917"/><polygon fill="#545454" points="1220.8333,1023.525,1210.4167,1027.6917,1220.8333,1031.8583,1216.6667,1027.6917" style="stroke:#545454;stroke-width:1.0416666666666667;"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="43.75" x="1219.7917" y="1006.3049">parse()</text><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="1209.375" x2="1253.125" y1="1088.385" y2="1088.385"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="1253.125" x2="1253.125" y1="1088.385" y2="1101.9267"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="1204.1667" x2="1253.125" y1="1101.9267" y2="1101.9267"/><polygon fill="#545454" points="1214.5833,1097.76,1204.1667,1101.9267,1214.5833,1106.0933,1210.4167,1101.9267" style="stroke:#545454;stroke-width:1.0416666666666667;"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="154.1667" x="1219.7917" y="1065.8183">service provider classes</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="47.9167" x="1228.125" y="1080.54">iterator</text><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="1204.1667" x2="1247.9167" y1="1137.4817" y2="1137.4817"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="1247.9167" x2="1247.9167" y1="1137.4817" y2="1151.0234"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="1198.9583" x2="1247.9167" y1="1151.0234" y2="1151.0234"/><polygon fill="#545454" points="1209.375,1146.8567,1198.9583,1151.0234,1209.375,1155.19,1205.2083,1151.0234" style="stroke:#545454;stroke-width:1.0416666666666667;"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="122.9167" x="1214.5833" y="1129.6366">next provider class</text><polygon fill="#545454" points="1367.7083,1177.2034,1378.125,1181.37,1367.7083,1185.5367,1371.875,1181.37" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="1198.9583" x2="1373.9583" y1="1181.37" y2="1181.37"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="108.3333" x="1209.375" y="1173.525">new(constructor)</text><rect fill="#484848" height="38.0086" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="115.625" x="1380.2083" y="1154.1484"/><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="94.7917" x="1390.625" y="1178.6641">:ProviderImpl</text><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="1198.9583" x2="1242.7083" y1="1215.0736" y2="1215.0736"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="1242.7083" x2="1242.7083" y1="1215.0736" y2="1228.6153"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="1193.75" x2="1242.7083" y1="1228.6153" y2="1228.6153"/><polygon fill="#545454" points="1204.1667,1224.4486,1193.75,1228.6153,1204.1667,1232.782,1200,1228.6153" style="stroke:#545454;stroke-width:1.0416666666666667;"/><polygon fill="#545454" points="755.2083,1233.8236,744.7917,1237.9903,755.2083,1242.157,751.0417,1237.9903" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="748.9583" x2="1187.5" y1="1237.9903" y2="1237.9903"/><polygon fill="#545454" points="542.7083,1255.6986,532.2917,1259.8653,542.7083,1264.032,538.5417,1259.8653" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="536.4583" x2="737.5" y1="1259.8653" y2="1259.8653"/><polygon fill="#545454" points="43.75,1270.282,33.3333,1274.4486,43.75,1278.6153,39.5833,1274.4486" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="37.5" x2="525" y1="1274.4486" y2="1274.4486"/><polygon fill="#545454" points="508.3333,1305.837,518.75,1310.0037,508.3333,1314.1703,512.5,1310.0037" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="32.2917" x2="514.5833" y1="1310.0037" y2="1310.0037"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="36.4583" x="42.7083" y="1302.1586">next()</text><polygon fill="#545454" points="720.8333,1341.392,731.25,1345.5587,720.8333,1349.7253,725,1345.5587" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="531.25" x2="727.0833" y1="1345.5587" y2="1345.5587"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="36.4583" x="541.6667" y="1337.7136">next()</text><path d="M631.25,1361.1837 L692.7083,1361.1837 L692.7083,1373.6837 L682.2917,1384.1003 L622.9167,1384.1003 L622.9167,1369.517 " fill="#484848" style="stroke:#484848;stroke-width:1.0416666666666667;"/><rect fill="none" height="99.5117" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:2.0833333333333335;" width="460.4167" x="622.9167" y="1361.1837"/><text fill="#0060A8" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="641.6667" y="1377.4353">alt</text><text fill="#3380B9" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="63.5417" x="711.4583" y="1378.477">[has next]</text><polygon fill="#545454" points="945.8333,1412.6404,956.25,1416.807,945.8333,1420.9737,950,1416.807" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="743.75" x2="952.0833" y1="1416.807" y2="1416.807"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="36.4583" x="754.1667" y="1408.962">next()</text><polygon fill="#545454" points="755.2083,1448.1954,744.7917,1452.3621,755.2083,1456.5287,751.0417,1452.3621" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="748.9583" x2="962.5" y1="1452.3621" y2="1452.3621"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="81.25" x="764.5833" y="1444.517">nextProvider</text><path d="M631.25,1475.2787 L692.7083,1475.2787 L692.7083,1487.7787 L682.2917,1498.1954 L622.9167,1498.1954 L622.9167,1483.6121 " fill="#484848" style="stroke:#484848;stroke-width:1.0416666666666667;"/><rect fill="none" height="99.5117" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:2.0833333333333335;" width="681.25" x="622.9167" y="1475.2787"/><text fill="#0060A8" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="641.6667" y="1491.5304">alt</text><text fill="#3380B9" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="63.5417" x="711.4583" y="1492.572">[has next]</text><polygon fill="#545454" points="1170.8333,1526.7354,1181.25,1530.9021,1170.8333,1535.0688,1175,1530.9021" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="743.75" x2="1177.0833" y1="1530.9021" y2="1530.9021"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="36.4583" x="754.1667" y="1523.057">next()</text><polygon fill="#545454" points="755.2083,1562.2904,744.7917,1566.4571,755.2083,1570.6238,751.0417,1566.4571" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="748.9583" x2="1187.5" y1="1566.4571" y2="1566.4571"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="81.25" x="764.5833" y="1558.6121">nextProvider</text><polygon fill="#545454" points="542.7083,1584.1654,532.2917,1588.3321,542.7083,1592.4988,538.5417,1588.3321" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="536.4583" x2="737.5" y1="1588.3321" y2="1588.3321"/><polygon fill="#545454" points="1420.3125,1619.7205,1430.7292,1623.8871,1420.3125,1628.0538,1424.4792,1623.8871" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="531.25" x2="1426.5625" y1="1623.8871" y2="1623.8871"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="29.1667" x="541.6667" y="1616.0421">get()</text><polygon fill="#545454" points="542.7083,1655.2755,532.2917,1659.4421,542.7083,1663.6088,538.5417,1659.4421" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="536.4583" x2="1436.9792" y1="1659.4421" y2="1659.4421"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="103.125" x="552.0833" y="1651.5971">service instance</text><polygon fill="#545454" points="43.75,1690.8305,33.3333,1694.9972,43.75,1699.1638,39.5833,1694.9972" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="37.5" x2="525" y1="1694.9972" y2="1694.9972"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="103.125" x="53.125" y="1687.1521">service instance</text><!--MD5=[8a62b544a38f717ddaf4b10a3cac6c08]
@startuml

    !include ../lexakai.theme

    title "Load Service Provider"

    autoactivate on

    actor Client
    participant ":ServiceLoader" as loader
    participant ":Anonymous\nIterator" as iterator
    participant ":Anonymous\nLookupIterator" as lookup
    participant ":ModuleServices\nLookupIterator" as first
    participant ":LazyClassPath\nLookupIterator" as second
    participant ":ProviderImpl" as provider

    Client -> loader ** : __load__(serviceTypeClass)
    Client -> loader : iterator()
    loader -> first **
    loader -> second **
    loader -> lookup ** : new(moduleServicesLookupIterator,\n       lazyClassPathLookupIterator)
    loader -> iterator **
    return iterator

    Client -> iterator : hasNext()
    iterator -> lookup : hasNext()

    lookup -> first : hasNext()
    note right first
        find service provider from catalog of ClassLoader
        {AppClassLoader, PlatformClassLoader, BootClassLoader}

        if found, load nextProvider
    end note
    return

    alt no next in ModulesServices
        lookup -> second : hasNext()
        second -> second : hasNextService()
        second -> second : nextProviderClass()
        note right second
            [configs is null]
            serviceLoader.configs
                = classLoader.getResource(configFile)
        end note
        second -> second : parse()
        return service provider classes\n  iterator
        return next provider class
        second -> provider **  : new(constructor)
        return
        return
    end alt

    return
    return

    Client -> iterator : next()
    iterator -> lookup : next()

    alt has next
        lookup -> first : next()
        return nextProvider
    end alt
    alt has next
        lookup -> second : next()
        return nextProvider
    end alt

    return
    iterator -> provider : get()
    return service instance
    return service instance

@enduml

@startuml









skinparam backgroundColor #333333






skinparam  {
    defaultFontName   "Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif"
    defaultFontSize   12
    defaultTextAlignment left
    shadowing false
    RoundCorner 10
    TitleFontSize 18
}

skinparam defaultFontName       "Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif"
skinparam defaultFontSize       12
skinparam dpi                   100
skinparam shadowing             false
skinparam roundcorner           16
skinparam ParticipantPadding    40
skinparam BoxPadding            40
skinparam Padding               3
skinparam ArrowColor            #545454
skinparam stereotype {
    CBackgroundColor #0066cf
    CBorderColor #0086ef
    ABackgroundColor #C8Ac00
    ABorderColor #D8Bc00
    IBackgroundColor #008400
    IBorderColor #239c23
    EBackgroundColor #cf6300
    EBorderColor #ef8300
    NBackgroundColor #3380b9
    NBorderColor #004d86
}
skinparam title {
	FontColor	                 #c0c0c0
 	BorderColor                  #545454
	FontSize	    	         20
	BorderRoundCorner            16
	BorderThickness 	         1
	BackgroundColor              #48494b
}


skinparam legend {
	BackgroundColor #303030
	BorderColor #404040
	FontColor #a0a0a0
}

	skinparam swimlane {
	BorderColor #5e5e5e
	BorderThickness 2
	TitleBackgroundColor  #6d6d6d-#484848
	TitleFontColor #303030
}

skinparam activity {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
	BarColor #00FF00
	StartColor #0060a8
	EndColor #0060a8
	DiamondBackgroundColor #6d6d6d-#3a3a3a
  	DiamondBorderColor #3a3a3a
  	DiamondFontColor #fefefe
}


skinparam participant {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
	ParticipantBorderThickness 2
}


skinparam actor {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
}


skinparam arrow {
	Thickness 1.5
	Color #545454
	FontColor #a0a0a0
    FontStyle bold
    MessageAlignment center
}



skinparam sequence {
	BorderColor #303030
	TitleFontColor #303030
	BackgroundColor #333333
	StartColor #303030
	EndColor #303030
	BoxBackgroundColor #333333
	BoxBorderColor #484848
	BoxFontColor #484848
	LifeLineBorderColor #484848
	LifeLineBorderThickness 2
	LifeLineBackgroundColor #3a3a3a
	GroupBorderColor #484848
	GroupFontColor #3380b9
	GroupHeaderFontColor #0060a8
	GroupBackgroundColor #484848
	GroupHeaderBackgroundColor #333333
	DividerBackgroundColor #484848
    DividerBorderColor #484848
    DividerBorderThickness 2
    DividerFontColor #D8Bc00
	ReferenceBackgroundColor #333333
	ReferenceBorderColor #484848
	ReferenceFontColor #fefefe
	ReferenceHeaderBackgroundColor #484848
    Participant underline
    ParticipantBackgroundColor #484848
    ParticipantBorderColor #484848
    ParticipantFontSize 14
    ActorBorderColor #484848
    ActorBackgroundColor #484848
    ActorFontSize 14
}


skinparam partition {
	BorderColor #303030
	FontColor #333333
	BackgroundColor #333333
}


skinparam collections {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
}


skinparam control {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
}


skinparam entity {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
}


skinparam boundary {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
}


skinparam agent {
	BackgroundColor #ff8000
	BorderColor #ff9933
	FontColor #484848
}


skinparam note {
	BorderThickness 1
	BackgroundColor #1b1b1a
	BorderColor #5e5e5e
	FontSize 11
	FontColor #a0a0a0
}


skinparam artifact {
	BorderThickness 10
	BorderColor #5e5e5e
	BackgroundColor #1b1b1a
	FontColor #D8Bc00
}


skinparam component {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
}


skinparam interface {
	BackgroundColor  #008400
	BorderColor  #007F00
	FontColor #484848
}


skinparam storage {
	BackgroundColor #ff8000
  	BorderColor #cc6600
	FontColor #222222
}


skinparam node {
	BackgroundColor #333333
	BorderColor #333333
	FontColor #C8Ac00
}


skinparam cloud {
	BackgroundColor #484848-black
	BorderColor #484848
	FontColor #D8Bc00
}


skinparam database {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
	BackgroundColor  #333333
}


skinparam class {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
	HeaderBackgroundColor #1b1b1a
    BackgroundColor #282828
    BorderColor #5e5e5e
 	StereotypeFontColor #a0a0a0
    StereotypeFontStyle bold
	BorderThickness 1
	AttributeFontColor #D8Bc00
	AttributeFontSize 11
    FontColor #D8Bc00
    FontStyle bold
}


skinparam object {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
	StereotypeFontColor #484848
	BorderThickness 1
	AttributeFontColor #fefefe
	AttributeFontSize 11
}


skinparam usecase {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
	BorderThickness 2
	StereotypeFontColor #303030
}


skinparam rectangle {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
	BackgroundColor #333333
	BorderThickness 2
	StereotypeFontColor #303030
}


skinparam package {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
	BackgroundColor #333333
	BorderColor #5e5e5e
	BorderStyle dashed
	Style rectangle
}


skinparam folder {
	BackgroundColor #6d6d6d
  	BorderColor #ff8000
	FontColor #ff8000
	BorderThickness 2
}


skinparam frame {
	BackgroundColor #6d6d6d
  	BorderColor #0060a8
	FontColor #0060a8
	BorderThickness 2
}


skinparam state {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
	StartColor #0060a8
	EndColor #0060a8
	AttributeFontColor #fefefe
	AttributeFontSize 11
}


skinparam queue {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
}


skinparam card {
	BackgroundColor #0060a8
	BorderColor #004d86
	FontColor $INFO_TEXT
}


skinparam file {
	BackgroundColor #6d6d6d-#484848
	BorderColor #0060a8
	FontColor #fefefe
}


skinparam stack {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
}


    title "Load Service Provider"

    autoactivate on

    actor Client
    participant ":ServiceLoader" as loader
    participant ":Anonymous\nIterator" as iterator
    participant ":Anonymous\nLookupIterator" as lookup
    participant ":ModuleServices\nLookupIterator" as first
    participant ":LazyClassPath\nLookupIterator" as second
    participant ":ProviderImpl" as provider

    Client -> loader ** : __load__(serviceTypeClass)
    Client -> loader : iterator()
    loader -> first **
    loader -> second **
    loader -> lookup ** : new(moduleServicesLookupIterator,\n       lazyClassPathLookupIterator)
    loader -> iterator **
    return iterator

    Client -> iterator : hasNext()
    iterator -> lookup : hasNext()

    lookup -> first : hasNext()
    note right first
        find service provider from catalog of ClassLoader
        {AppClassLoader, PlatformClassLoader, BootClassLoader}

        if found, load nextProvider
    end note
    return

    alt no next in ModulesServices
        lookup -> second : hasNext()
        second -> second : hasNextService()
        second -> second : nextProviderClass()
        note right second
            [configs is null]
            serviceLoader.configs
                = classLoader.getResource(configFile)
        end note
        second -> second : parse()
        return service provider classes\n  iterator
        return next provider class
        second -> provider **  : new(constructor)
        return
        return
    end alt

    return
    return

    Client -> iterator : next()
    iterator -> lookup : next()

    alt has next
        lookup -> first : next()
        return nextProvider
    end alt
    alt has next
        lookup -> second : next()
        return nextProvider
    end alt

    return
    iterator -> provider : get()
    return service instance
    return service instance

@enduml

PlantUML version 1.2021.7(Sun May 23 05:40:07 PDT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: Dynamic Code Evolution 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>
