<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2045.8333px" preserveAspectRatio="none" style="width:1761px;height:2045px;background:#333333;" version="1.1" viewBox="0 0 1761 2045" width="1761.4583px" zoomAndPan="magnify"><defs/><g><rect fill="#48494B" height="41.2028" rx="8.3333" ry="8.3333" style="stroke:#545454;stroke-width:1.0416666666666667;" width="203.125" x="780.9896" y="14.5833"/><text fill="#C0C0C0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="20.8333" lengthAdjust="spacing" textLength="180.2083" x="792.4479" y="43.0583">Save Field Archive</text><rect fill="#3A3A3A" height="1274.8637" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="293.75" y="660.9375"/><rect fill="#3A3A3A" height="1100.3764" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="551.0417" y="813.5498"/><rect fill="#3A3A3A" height="14.5833" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="784.8958" y="1698.7895"/><rect fill="#3A3A3A" height="14.5833" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="784.8958" y="1748.9278"/><rect fill="#3A3A3A" height="14.5833" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="784.8958" y="1799.0662"/><rect fill="#3A3A3A" height="999.823" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1012.5" y="878.5482"/><rect fill="#3A3A3A" height="182.312" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1017.7083" y="963.0147"/><rect fill="#3A3A3A" height="35.555" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1229.6875" y="1003.7781"/><rect fill="#3A3A3A" height="116.6178" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1229.6875" y="1432.7983"/><rect fill="#3A3A3A" height="315.0879" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1439.0625" y="1348.1466"/><rect fill="#3A3A3A" height="228.3529" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1444.2708" y="1392.0349"/><rect fill="#3A3A3A" height="14.5833" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1439.0625" y="1849.2045"/><rect fill="#3A3A3A" height="14.5833" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1655.7292" y="1584.9711"/><rect fill="#333333" height="1245.697" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:2.0833333333333335;" width="1565.1042" x="190.625" y="676.5625"/><line style="stroke:#484848;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="32.2917" x2="32.2917" y1="155.2531" y2="1954.5512"/><line style="stroke:#484848;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="298.9583" x2="298.9583" y1="270.8415" y2="1954.5512"/><line style="stroke:#484848;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="556.25" x2="556.25" y1="756.0628" y2="1954.5512"/><line style="stroke:#484848;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="789.5833" x2="789.5833" y1="392.7836" y2="1954.5512"/><line style="stroke:#484848;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="1017.7083" x2="1017.7083" y1="465.5599" y2="1954.5512"/><line style="stroke:#484848;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="1234.375" x2="1234.375" y1="529.7485" y2="1954.5512"/><line style="stroke:#484848;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="1444.2708" x2="1444.2708" y1="1090.1774" y2="1954.5512"/><line style="stroke:#484848;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="1660.9375" x2="1660.9375" y1="1203.4627" y2="1954.5512"/><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="41.6667" x="8.3333" y="149.0519">Client</text><ellipse cx="32.2917" cy="76.6195" fill="#484848" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:2.0833333333333335;"/><path d="M32.2917,84.9528 L32.2917,113.0778 M18.75,93.2861 L45.8333,93.2861 M32.2917,113.0778 L18.75,128.7028 M32.2917,113.0778 L45.8333,128.7028 " fill="none" style="stroke:#484848;stroke-width:2.0833333333333335;"/><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="41.6667" x="8.3333" y="1970.7336">Client</text><ellipse cx="32.2917" cy="1987.3515" fill="#484848" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:2.0833333333333335;"/><path d="M32.2917,1995.6848 L32.2917,2023.8098 M18.75,2004.0181 L45.8333,2004.0181 M32.2917,2023.8098 L18.75,2039.4348 M32.2917,2023.8098 L45.8333,2039.4348 " fill="none" style="stroke:#484848;stroke-width:2.0833333333333335;"/><rect fill="#484848" height="69.9056" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="112.5" x="242.7083" y="1953.5095"/><text fill="#000000" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="64.5833" x="266.6667" y="1976.0111">«resource»</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="51.0417" x="273.4375" y="1992.747">archive</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="91.6667" x="253.125" y="2009.9223">:FieldArchive</text><rect fill="#484848" height="69.9056" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="112.5" x="500" y="1953.5095"/><text fill="#000000" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="64.5833" x="523.9583" y="1976.0111">«resource»</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="91.6667" x="510.4167" y="1992.747">:FieldArchive</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="84.375" x="514.0625" y="2009.9223">.ObjectField</text><rect fill="#484848" height="69.9056" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="167.7083" x="706.25" y="1953.5095"/><text fill="#000000" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="84.375" x="747.9167" y="1976.0111">«serialization»</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="53.125" x="763.5417" y="1992.747">session</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="146.875" x="716.6667" y="2009.9223">:SerializationSession</text><rect fill="#484848" height="52.7303" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="100" x="967.7083" y="1953.5095"/><text fill="#000000" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="64.5833" x="985.4167" y="1976.0111">«resource»</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="79.1667" x="978.125" y="1992.747">:ZipArchive</text><rect fill="#484848" height="52.7303" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="121.875" x="1173.9583" y="1953.5095"/><text fill="#000000" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="37.5" x="1216.1458" y="1976.0111">«java»</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="101.0417" x="1184.375" y="1992.747">:ZipFileSystem</text><rect fill="#484848" height="52.7303" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="85.4167" x="1401.5625" y="1953.5095"/><text fill="#000000" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="64.5833" x="1411.9792" y="1976.0111">«resource»</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="62.5" x="1413.0208" y="1992.747">:ZipEntry</text><rect fill="#484848" height="52.7303" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="85.4167" x="1618.2292" y="1953.5095"/><text fill="#000000" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="64.5833" x="1628.6458" y="1976.0111">«resource»</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="48.9583" x="1636.4583" y="1992.747">:Codec</text><rect fill="#3A3A3A" height="1274.8637" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="293.75" y="660.9375"/><rect fill="#3A3A3A" height="1100.3764" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="551.0417" y="813.5498"/><rect fill="#3A3A3A" height="14.5833" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="784.8958" y="1698.7895"/><rect fill="#3A3A3A" height="14.5833" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="784.8958" y="1748.9278"/><rect fill="#3A3A3A" height="14.5833" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="784.8958" y="1799.0662"/><rect fill="#3A3A3A" height="999.823" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1012.5" y="878.5482"/><rect fill="#3A3A3A" height="182.312" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1017.7083" y="963.0147"/><rect fill="#3A3A3A" height="35.555" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1229.6875" y="1003.7781"/><rect fill="#3A3A3A" height="116.6178" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1229.6875" y="1432.7983"/><rect fill="#3A3A3A" height="315.0879" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1439.0625" y="1348.1466"/><rect fill="#3A3A3A" height="228.3529" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1444.2708" y="1392.0349"/><rect fill="#3A3A3A" height="14.5833" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1439.0625" y="1849.2045"/><rect fill="#3A3A3A" height="14.5833" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1655.7292" y="1584.9711"/><path d="M37.5,179.2114 L37.5,205.2531 A8.3333,8.3333 0 0 0 45.8333,213.5864 L412.5,213.5864 A8.3333,8.3333 0 0 0 420.8333,205.2531 L420.8333,181.2948 L410.4167,170.8781 L45.8333,170.8781 A8.3333,8.3333 0 0 0 37.5,179.2114 " fill="#1B1B1A" style="stroke:#5E5E5E;stroke-width:1.0416666666666667;"/><path d="M410.4167,170.8781 L410.4167,177.1281 A4.1667,4.1667 0 0 0 414.5833,181.2948 L420.8333,181.2948 L410.4167,170.8781 " fill="#1B1B1A" style="stroke:#5E5E5E;stroke-width:1.0416666666666667;"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="142.7083" x="46.875" y="190.2893">file : kivakit.filesystem.File</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="355.2083" x="46.875" y="203.7842">sessionFactory : kivakit.serialization.SerializationSessionFactory</text><polygon fill="#545454" points="230.2083,257.5195,240.625,261.6862,230.2083,265.8529,234.375,261.6862" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="32.2917" x2="236.4583" y1="261.6862" y2="261.6862"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="30.2083" x="42.7083" y="239.1195">new(</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="129.1667" x="51.0417" y="253.8411">file, sessionFactory)</text><rect fill="#484848" height="69.9056" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="112.5" x="242.7083" y="219.7428"/><text fill="#000000" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="64.5833" x="266.6667" y="242.2445">«resource»</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="51.0417" x="273.4375" y="258.9803">archive</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="91.6667" x="253.125" y="276.1556">:FieldArchive</text><path d="M304.1667,314.6484 L304.1667,327.1484 A8.3333,8.3333 0 0 0 312.5,335.4818 L533.3333,335.4818 A8.3333,8.3333 0 0 0 541.6667,327.1484 L541.6667,316.7318 L531.25,306.3151 L312.5,306.3151 A8.3333,8.3333 0 0 0 304.1667,314.6484 " fill="#1B1B1A" style="stroke:#5E5E5E;stroke-width:1.0416666666666667;"/><path d="M531.25,306.3151 L531.25,312.5651 A4.1667,4.1667 0 0 0 535.4167,316.7318 L541.6667,316.7318 L531.25,306.3151 " fill="#1B1B1A" style="stroke:#5E5E5E;stroke-width:1.0416666666666667;"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="209.375" x="313.5417" y="325.7263">create lazy session by sessionFactory</text><line style="stroke:#545454;stroke-width:1.5625;" x1="704.1667" x2="693.75" y1="368.9067" y2="364.74"/><line style="stroke:#545454;stroke-width:1.5625;" x1="704.1667" x2="693.75" y1="368.9067" y2="373.0733"/><line style="stroke:#545454;stroke-width:1.5625;" x1="298.9583" x2="705.2083" y1="368.9067" y2="368.9067"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="34.375" x="309.375" y="361.0616">new()</text><rect fill="#484848" height="69.9056" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="167.7083" x="706.25" y="341.685"/><text fill="#000000" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="84.375" x="747.9167" y="364.1866">«serialization»</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="53.125" x="763.5417" y="380.9224">session</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="146.875" x="716.6667" y="398.0977">:SerializationSession</text><polygon fill="#545454" points="955.2083,446.1039,965.625,450.2706,955.2083,454.4373,959.375,450.2706" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="298.9583" x2="961.4583" y1="450.2706" y2="450.2706"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="32.2917" x="309.375" y="442.4255">open</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="29.1667" x="341.6667" y="442.4255">(file)</text><rect fill="#484848" height="52.7303" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="100" x="967.7083" y="423.0489"/><text fill="#000000" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="64.5833" x="985.4167" y="445.5505">«resource»</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="79.1667" x="978.125" y="462.2864">:ZipArchive</text><line style="stroke:#545454;stroke-width:1.5625;" x1="1171.875" x2="1161.4583" y1="514.4592" y2="510.2926"/><line style="stroke:#545454;stroke-width:1.5625;" x1="1171.875" x2="1161.4583" y1="514.4592" y2="518.6259"/><line style="stroke:#545454;stroke-width:1.5625;" x1="1017.7083" x2="1172.9167" y1="514.4592" y2="514.4592"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="83.3333" x="1028.125" y="506.6142">new(filePath)</text><rect fill="#484848" height="52.7303" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="121.875" x="1173.9583" y="487.2375"/><text fill="#000000" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="37.5" x="1216.1458" y="509.7392">«java»</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="101.0417" x="1184.375" y="526.475">:ZipFileSystem</text><path d="M1026.0417,564.9679 L1026.0417,604.5512 A8.3333,8.3333 0 0 0 1034.375,612.8845 L1220.8333,612.8845 A8.3333,8.3333 0 0 0 1229.1667,604.5512 L1229.1667,567.0512 L1218.75,556.6345 L1034.375,556.6345 A8.3333,8.3333 0 0 0 1026.0417,564.9679 " fill="#1B1B1A" style="stroke:#5E5E5E;stroke-width:1.0416666666666667;"/><path d="M1218.75,556.6345 L1218.75,562.8845 A4.1667,4.1667 0 0 0 1222.9167,567.0512 L1229.1667,567.0512 L1218.75,556.6345 " fill="#1B1B1A" style="stroke:#5E5E5E;stroke-width:1.0416666666666667;"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="125" x="1035.4167" y="576.0457">before new ZipArchive</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="175" x="1035.4167" y="589.5406">via FileSystems.newFileSystem()</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="109.375" x="1035.4167" y="603.0355">creates physical file</text><polygon fill="#545454" points="281.25,656.7708,291.6667,660.9375,281.25,665.1042,285.4167,660.9375" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="32.2917" x2="287.5" y1="660.9375" y2="660.9375"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="87.5" x="42.7083" y="638.3708">saveFiledsOf(</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="144.7917" x="51.0417" y="653.0924">namedObject, version)</text><path d="M198.9583,676.5625 L272.9167,676.5625 L272.9167,689.0625 L262.5,699.4792 L190.625,699.4792 L190.625,684.8958 " fill="#484848" style="stroke:#484848;stroke-width:1.0416666666666667;"/><rect fill="none" height="1245.697" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:2.0833333333333335;" width="1565.1042" x="190.625" y="676.5625"/><text fill="#0060A8" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="29.1667" x="209.375" y="692.8141">loop</text><text fill="#3380B9" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="182.2917" x="291.6667" y="693.8558">[properties of namedObject]</text><polygon fill="#545454" points="487.5,742.7409,497.9167,746.9076,487.5,751.0742,491.6667,746.9076" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="304.1667" x2="493.75" y1="746.9076" y2="746.9076"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="118.75" x="314.5833" y="724.3408">new(namedObject,</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="33.3333" x="322.9167" y="739.0625">field)</text><rect fill="#484848" height="69.9056" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="112.5" x="500" y="704.9642"/><text fill="#000000" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="64.5833" x="523.9583" y="727.4658">«resource»</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="91.6667" x="510.4167" y="744.2017">:FieldArchive</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="84.375" x="514.0625" y="761.377">.ObjectField</text><polygon fill="#545454" points="538.5417,809.3831,548.9583,813.5498,538.5417,817.7165,542.7083,813.5498" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="304.1667" x2="544.7917" y1="813.5498" y2="813.5498"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="87.5" x="314.5833" y="805.7048">save(session)</text><polygon fill="#545454" points="1000,874.3815,1010.4167,878.5482,1000,882.7148,1004.1667,878.5482" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="561.4583" x2="1006.25" y1="878.5482" y2="878.5482"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="86.4583" x="571.875" y="841.2598">save(session,</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="72.9167" x="580.2083" y="855.9814">entryName,</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="103.125" x="580.2083" y="870.7031">versionedValue)</text><path d="M566.6667,900.4232 L566.6667,912.9232 A8.3333,8.3333 0 0 0 575,921.2565 L760.4167,921.2565 A8.3333,8.3333 0 0 0 768.75,912.9232 L768.75,902.5065 L758.3333,892.0898 L575,892.0898 A8.3333,8.3333 0 0 0 566.6667,900.4232 " fill="#1B1B1A" style="stroke:#5E5E5E;stroke-width:1.0416666666666667;"/><path d="M758.3333,892.0898 L758.3333,898.3398 A4.1667,4.1667 0 0 0 762.5,902.5065 L768.75,902.5065 L758.3333,892.0898 " fill="#1B1B1A" style="stroke:#5E5E5E;stroke-width:1.0416666666666667;"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="173.9583" x="576.0417" y="911.5011">entryName: objName.fieldName</text><line style="stroke:#545454;stroke-width:1.5625;" x1="1022.9167" x2="1071.875" y1="949.4731" y2="949.4731"/><line style="stroke:#545454;stroke-width:1.5625;" x1="1071.875" x2="1071.875" y1="949.4731" y2="963.0147"/><line style="stroke:#545454;stroke-width:1.5625;" x1="1029.1667" x2="1071.875" y1="963.0147" y2="963.0147"/><polygon fill="#545454" points="1039.5833,958.8481,1029.1667,963.0147,1039.5833,967.1814,1035.4167,963.0147" style="stroke:#545454;stroke-width:1.0416666666666667;"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="111.4583" x="1038.5417" y="941.628">entry(entryName)</text><polygon fill="#545454" points="1217.1875,999.6114,1227.6042,1003.7781,1217.1875,1007.9447,1221.3542,1003.7781" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="1028.125" x2="1223.4375" y1="1003.7781" y2="1003.7781"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="127.0833" x="1038.5417" y="995.933">getPath(entryName)</text><polygon fill="#545454" points="1039.5833,1035.1664,1029.1667,1039.3331,1039.5833,1043.4998,1035.4167,1039.3331" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="1033.3333" x2="1233.8542" y1="1039.3331" y2="1039.3331"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="47.9167" x="1048.9583" y="1031.488">zipPath</text><polygon fill="#545454" points="1389.0625,1070.7214,1399.4792,1074.8881,1389.0625,1079.0548,1393.2292,1074.8881" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="1028.125" x2="1395.3125" y1="1074.8881" y2="1074.8881"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="82.2917" x="1038.5417" y="1067.0431">new(zipPath)</text><rect fill="#484848" height="52.7303" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="85.4167" x="1401.5625" y="1047.6664"/><text fill="#000000" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="64.5833" x="1411.9792" y="1070.1681">«resource»</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="62.5" x="1413.0208" y="1086.9039">:ZipEntry</text><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="1028.125" x2="1071.875" y1="1144.2851" y2="1144.2851"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="1071.875" x2="1071.875" y1="1144.2851" y2="1157.8267"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="1022.9167" x2="1071.875" y1="1157.8267" y2="1157.8267"/><polygon fill="#545454" points="1033.3333,1153.6601,1022.9167,1157.8267,1033.3333,1161.9934,1029.1667,1157.8267" style="stroke:#545454;stroke-width:1.0416666666666667;"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="53.125" x="1038.5417" y="1136.44">zipEntry</text><polygon fill="#545454" points="1605.7292,1184.0068,1616.1458,1188.1734,1605.7292,1192.3401,1609.8958,1188.1734" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="1444.2708" x2="1611.9792" y1="1188.1734" y2="1188.1734"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="34.375" x="1454.6875" y="1180.3284">new()</text><rect fill="#484848" height="52.7303" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="85.4167" x="1618.2292" y="1160.9517"/><text fill="#000000" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="64.5833" x="1628.6458" y="1183.4534">«resource»</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="48.9583" x="1636.4583" y="1200.1892">:Codec</text><path d="M1530.2083,1238.682 L1530.2083,1291.807 A8.3333,8.3333 0 0 0 1538.5417,1300.1404 L1646.875,1300.1404 A8.3333,8.3333 0 0 0 1655.2083,1291.807 L1655.2083,1240.7654 L1644.7917,1230.3487 L1538.5417,1230.3487 A8.3333,8.3333 0 0 0 1530.2083,1238.682 " fill="#1B1B1A" style="stroke:#5E5E5E;stroke-width:1.0416666666666667;"/><path d="M1644.7917,1230.3487 L1644.7917,1236.5987 A4.1667,4.1667 0 0 0 1648.9583,1240.7654 L1655.2083,1240.7654 L1644.7917,1230.3487 " fill="#1B1B1A" style="stroke:#5E5E5E;stroke-width:1.0416666666666667;"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="96.875" x="1539.5833" y="1249.7599">file-extension -&gt;</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="63.5417" x="1552.0833" y="1263.2548">GzipCodec;</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="56.25" x="1552.0833" y="1276.7497">ZipCodec;</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="60.4167" x="1552.0833" y="1290.2445">NullCodec;</text><polygon fill="#545454" points="1426.5625,1343.9799,1436.9792,1348.1466,1426.5625,1352.3132,1430.7292,1348.1466" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="1022.9167" x2="1432.8125" y1="1348.1466" y2="1348.1466"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="141.6667" x="1033.3333" y="1325.5798">BaseWritableResource</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="119.7917" x="1033.3333" y="1340.3015">::openForReading()</text><line style="stroke:#545454;stroke-width:1.5625;" x1="1449.4792" x2="1498.4375" y1="1378.4932" y2="1378.4932"/><line style="stroke:#545454;stroke-width:1.5625;" x1="1498.4375" x2="1498.4375" y1="1378.4932" y2="1392.0349"/><line style="stroke:#545454;stroke-width:1.5625;" x1="1455.7292" x2="1498.4375" y1="1392.0349" y2="1392.0349"/><polygon fill="#545454" points="1466.1458,1387.8682,1455.7292,1392.0349,1466.1458,1396.2016,1461.9792,1392.0349" style="stroke:#545454;stroke-width:1.0416666666666667;"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="127.0833" x="1465.1042" y="1370.6482">onOpenForWriting()</text><polygon fill="#545454" points="1251.5625,1428.6316,1241.1458,1432.7983,1251.5625,1436.9649,1247.3958,1432.7983" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="1245.3125" x2="1443.2292" y1="1432.7983" y2="1432.7983"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="172.9167" x="1260.9375" y="1424.9532">newOutputStream(zipPath)</text><path d="M1244.7917,1454.6733 L1244.7917,1507.7983 A8.3333,8.3333 0 0 0 1253.125,1516.1316 L1445.8333,1516.1316 A8.3333,8.3333 0 0 0 1454.1667,1507.7983 L1454.1667,1456.7566 L1443.75,1446.3399 L1253.125,1446.3399 A8.3333,8.3333 0 0 0 1244.7917,1454.6733 " fill="#1B1B1A" style="stroke:#5E5E5E;stroke-width:1.0416666666666667;"/><path d="M1443.75,1446.3399 L1443.75,1452.5899 A4.1667,4.1667 0 0 0 1447.9167,1456.7566 L1454.1667,1456.7566 L1443.75,1446.3399 " fill="#1B1B1A" style="stroke:#5E5E5E;stroke-width:1.0416666666666667;"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="177.0833" x="1254.1667" y="1465.7511">Files.newOutputStream(zipPath)</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="178.125" x="1257.2917" y="1479.246">-&gt; provider.newOutputStream()</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="170.8333" x="1260.4167" y="1492.7409">-&gt; zipPath.newOutputStream()</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="146.875" x="1263.5417" y="1506.2358">-&gt; zfs.newOutputStream()</text><polygon fill="#545454" points="1431.7708,1545.2494,1442.1875,1549.4161,1431.7708,1553.5828,1435.9375,1549.4161" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="1234.8958" x2="1438.0208" y1="1549.4161" y2="1549.4161"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="88.5417" x="1245.3125" y="1541.571">outputStream</text><polygon fill="#545454" points="1643.2292,1580.8044,1653.6458,1584.9711,1643.2292,1589.1378,1647.3958,1584.9711" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="1454.6875" x2="1649.4792" y1="1584.9711" y2="1584.9711"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="175" x="1465.1042" y="1577.1261">compressed(outputStream)</text><polygon fill="#545454" points="1466.1458,1595.3878,1455.7292,1599.5544,1466.1458,1603.7211,1461.9792,1599.5544" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="1459.8958" x2="1659.8958" y1="1599.5544" y2="1599.5544"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="1454.6875" x2="1498.4375" y1="1619.3461" y2="1619.3461"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="1498.4375" x2="1498.4375" y1="1619.3461" y2="1632.8878"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="1449.4792" x2="1498.4375" y1="1632.8878" y2="1632.8878"/><polygon fill="#545454" points="1459.8958,1628.7211,1449.4792,1632.8878,1459.8958,1637.0544,1455.7292,1632.8878" style="stroke:#545454;stroke-width:1.0416666666666667;"/><polygon fill="#545454" points="1034.375,1659.0678,1023.9583,1663.2345,1034.375,1667.4011,1030.2083,1663.2345" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="1028.125" x2="1443.2292" y1="1663.2345" y2="1663.2345"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="88.5417" x="1043.75" y="1655.3894">outputStream</text><polygon fill="#545454" points="806.7708,1694.6228,796.3542,1698.7895,806.7708,1702.9561,802.6042,1698.7895" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="800.5208" x2="1011.4583" y1="1698.7895" y2="1698.7895"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="84.375" x="816.1458" y="1690.9444">open(output)</text><polygon fill="#545454" points="1000,1709.2061,1010.4167,1713.3728,1000,1717.5395,1004.1667,1713.3728" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="790.1042" x2="1006.25" y1="1713.3728" y2="1713.3728"/><polygon fill="#545454" points="806.7708,1744.7611,796.3542,1748.9278,806.7708,1753.0945,802.6042,1748.9278" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="800.5208" x2="1011.4583" y1="1748.9278" y2="1748.9278"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="139.5833" x="816.1458" y="1741.0828">write(versionedValue)</text><polygon fill="#545454" points="1000,1759.3445,1010.4167,1763.5111,1000,1767.6778,1004.1667,1763.5111" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="790.1042" x2="1006.25" y1="1763.5111" y2="1763.5111"/><polygon fill="#545454" points="806.7708,1794.8995,796.3542,1799.0662,806.7708,1803.2328,802.6042,1799.0662" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="800.5208" x2="1011.4583" y1="1799.0662" y2="1799.0662"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="41.6667" x="816.1458" y="1791.2211">flush()</text><polygon fill="#545454" points="1000,1809.4828,1010.4167,1813.6495,1000,1817.8162,1004.1667,1813.6495" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="790.1042" x2="1006.25" y1="1813.6495" y2="1813.6495"/><polygon fill="#545454" points="1426.5625,1845.0378,1436.9792,1849.2045,1426.5625,1853.3712,1430.7292,1849.2045" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="1022.9167" x2="1432.8125" y1="1849.2045" y2="1849.2045"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="41.6667" x="1033.3333" y="1841.3595">close()</text><polygon fill="#545454" points="1034.375,1859.6212,1023.9583,1863.7878,1034.375,1867.9545,1030.2083,1863.7878" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="1028.125" x2="1443.2292" y1="1863.7878" y2="1863.7878"/><polygon fill="#545454" points="572.9167,1874.2045,562.5,1878.3712,572.9167,1882.5378,568.75,1878.3712" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="566.6667" x2="1016.6667" y1="1878.3712" y2="1878.3712"/><polygon fill="#545454" points="315.625,1909.7595,305.2083,1913.9262,315.625,1918.0929,311.4583,1913.9262" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="309.375" x2="555.2083" y1="1913.9262" y2="1913.9262"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="26.0417" x="325" y="1906.0811">true</text><polygon fill="#545454" points="43.75,1931.6345,33.3333,1935.8012,43.75,1939.9679,39.5833,1935.8012" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="37.5" x2="297.9167" y1="1935.8012" y2="1935.8012"/><!--MD5=[e288fbb77a7fa5d900d75af6eae1479e]
@startuml

    !include ../lexakai.theme

    title "Save Field Archive"

    autoactivate on

    actor Client
    participant "archive\n:FieldArchive" as archive <<resource>>
    participant ":FieldArchive\n.ObjectField" as field <<resource>>
    participant "session\n:SerializationSession" as session <<serialization>>
    participant ":ZipArchive" as zip <<resource>>
    participant ":ZipFileSystem" as fileSystem <<java>>
    participant ":ZipEntry" as entry <<resource>>
    participant ":Codec" as codec <<resource>>

    note right of Client
        file : kivakit.filesystem.File
        sessionFactory : kivakit.serialization.SerializationSessionFactory
    end note
    Client -> archive ** : new(\n  file, sessionFactory)

    note right archive
        create lazy session by sessionFactory
    end note
    archive ->> session ** : new()

    archive -> zip ** : __open__(file)
    zip ->> fileSystem ** : new(filePath)
    note left of fileSystem
        before new ZipArchive
        via FileSystems.newFileSystem()
        creates physical file
    end note

    Client -> archive : saveFiledsOf(\n  namedObject, version)

    loop properties of namedObject
        archive -> field ** : new(namedObject, \n  field)
        archive -> field : save(session)
        field -> zip : save(session, \n  entryName, \n  versionedValue)
        note right of field
            entryName: objName.fieldName
        end note

        zip -> zip : entry(entryName)
        zip -> fileSystem : getPath(entryName)
        return zipPath
        zip -> entry ** : new(zipPath)
        return zipEntry

        entry -> codec ** : new()
        note left of codec
            file-extension ->
                GzipCodec;
                ZipCodec;
                NullCodec;
        end note

        zip -> entry : BaseWritableResource\n::openForReading()
        entry -> entry : onOpenForWriting()

        entry -> fileSystem : newOutputStream(zipPath)
        note right fileSystem
            Files.newOutputStream(zipPath)
             -> provider.newOutputStream()
              -> zipPath.newOutputStream()
               -> zfs.newOutputStream()
        end note
        return outputStream

        entry -> codec : compressed(outputStream)
        return

        return
        return outputStream

        zip -> session : open(output)
        return
        zip -> session : write(versionedValue)
        return
        zip -> session : flush()
        return

        zip -> entry : close()
        return

        return
        return true
    end loop

    return

@enduml

@startuml









skinparam backgroundColor #333333






skinparam  {
    defaultFontName   "Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif"
    defaultFontSize   12
    defaultTextAlignment left
    shadowing false
    RoundCorner 10
    TitleFontSize 18
}

skinparam defaultFontName       "Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif"
skinparam defaultFontSize       12
skinparam dpi                   100
skinparam shadowing             false
skinparam roundcorner           16
skinparam ParticipantPadding    40
skinparam BoxPadding            40
skinparam Padding               3
skinparam ArrowColor            #545454
skinparam stereotype {
    CBackgroundColor #0066cf
    CBorderColor #0086ef
    ABackgroundColor #C8Ac00
    ABorderColor #D8Bc00
    IBackgroundColor #008400
    IBorderColor #239c23
    EBackgroundColor #cf6300
    EBorderColor #ef8300
    NBackgroundColor #3380b9
    NBorderColor #004d86
}
skinparam title {
	FontColor	                 #c0c0c0
 	BorderColor                  #545454
	FontSize	    	         20
	BorderRoundCorner            16
	BorderThickness 	         1
	BackgroundColor              #48494b
}


skinparam legend {
	BackgroundColor #303030
	BorderColor #404040
	FontColor #a0a0a0
}

	skinparam swimlane {
	BorderColor #5e5e5e
	BorderThickness 2
	TitleBackgroundColor  #6d6d6d-#484848
	TitleFontColor #303030
}

skinparam activity {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
	BarColor #00FF00
	StartColor #0060a8
	EndColor #0060a8
	DiamondBackgroundColor #6d6d6d-#3a3a3a
  	DiamondBorderColor #3a3a3a
  	DiamondFontColor #fefefe
}


skinparam participant {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
	ParticipantBorderThickness 2
}


skinparam actor {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
}


skinparam arrow {
	Thickness 1.5
	Color #545454
	FontColor #a0a0a0
    FontStyle bold
    MessageAlignment center
}



skinparam sequence {
	BorderColor #303030
	TitleFontColor #303030
	BackgroundColor #333333
	StartColor #303030
	EndColor #303030
	BoxBackgroundColor #333333
	BoxBorderColor #484848
	BoxFontColor #484848
	LifeLineBorderColor #484848
	LifeLineBorderThickness 2
	LifeLineBackgroundColor #3a3a3a
	GroupBorderColor #484848
	GroupFontColor #3380b9
	GroupHeaderFontColor #0060a8
	GroupBackgroundColor #484848
	GroupHeaderBackgroundColor #333333
	DividerBackgroundColor #484848
    DividerBorderColor #484848
    DividerBorderThickness 2
    DividerFontColor #D8Bc00
	ReferenceBackgroundColor #333333
	ReferenceBorderColor #484848
	ReferenceFontColor #fefefe
	ReferenceHeaderBackgroundColor #484848
    Participant underline
    ParticipantBackgroundColor #484848
    ParticipantBorderColor #484848
    ParticipantFontSize 14
    ActorBorderColor #484848
    ActorBackgroundColor #484848
    ActorFontSize 14
}


skinparam partition {
	BorderColor #303030
	FontColor #333333
	BackgroundColor #333333
}


skinparam collections {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
}


skinparam control {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
}


skinparam entity {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
}


skinparam boundary {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
}


skinparam agent {
	BackgroundColor #ff8000
	BorderColor #ff9933
	FontColor #484848
}


skinparam note {
	BorderThickness 1
	BackgroundColor #1b1b1a
	BorderColor #5e5e5e
	FontSize 11
	FontColor #a0a0a0
}


skinparam artifact {
	BorderThickness 10
	BorderColor #5e5e5e
	BackgroundColor #1b1b1a
	FontColor #D8Bc00
}


skinparam component {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
}


skinparam interface {
	BackgroundColor  #008400
	BorderColor  #007F00
	FontColor #484848
}


skinparam storage {
	BackgroundColor #ff8000
  	BorderColor #cc6600
	FontColor #222222
}


skinparam node {
	BackgroundColor #333333
	BorderColor #333333
	FontColor #C8Ac00
}


skinparam cloud {
	BackgroundColor #484848-black
	BorderColor #484848
	FontColor #D8Bc00
}


skinparam database {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
	BackgroundColor  #333333
}


skinparam class {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
	HeaderBackgroundColor #1b1b1a
    BackgroundColor #282828
    BorderColor #5e5e5e
 	StereotypeFontColor #a0a0a0
    StereotypeFontStyle bold
	BorderThickness 1
	AttributeFontColor #D8Bc00
	AttributeFontSize 11
    FontColor #D8Bc00
    FontStyle bold
}


skinparam object {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
	StereotypeFontColor #484848
	BorderThickness 1
	AttributeFontColor #fefefe
	AttributeFontSize 11
}


skinparam usecase {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
	BorderThickness 2
	StereotypeFontColor #303030
}


skinparam rectangle {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
	BackgroundColor #333333
	BorderThickness 2
	StereotypeFontColor #303030
}


skinparam package {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
	BackgroundColor #333333
	BorderColor #5e5e5e
	BorderStyle dashed
	Style rectangle
}


skinparam folder {
	BackgroundColor #6d6d6d
  	BorderColor #ff8000
	FontColor #ff8000
	BorderThickness 2
}


skinparam frame {
	BackgroundColor #6d6d6d
  	BorderColor #0060a8
	FontColor #0060a8
	BorderThickness 2
}


skinparam state {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
	StartColor #0060a8
	EndColor #0060a8
	AttributeFontColor #fefefe
	AttributeFontSize 11
}


skinparam queue {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
}


skinparam card {
	BackgroundColor #0060a8
	BorderColor #004d86
	FontColor $INFO_TEXT
}


skinparam file {
	BackgroundColor #6d6d6d-#484848
	BorderColor #0060a8
	FontColor #fefefe
}


skinparam stack {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
}


    title "Save Field Archive"

    autoactivate on

    actor Client
    participant "archive\n:FieldArchive" as archive <<resource>>
    participant ":FieldArchive\n.ObjectField" as field <<resource>>
    participant "session\n:SerializationSession" as session <<serialization>>
    participant ":ZipArchive" as zip <<resource>>
    participant ":ZipFileSystem" as fileSystem <<java>>
    participant ":ZipEntry" as entry <<resource>>
    participant ":Codec" as codec <<resource>>

    note right of Client
        file : kivakit.filesystem.File
        sessionFactory : kivakit.serialization.SerializationSessionFactory
    end note
    Client -> archive ** : new(\n  file, sessionFactory)

    note right archive
        create lazy session by sessionFactory
    end note
    archive ->> session ** : new()

    archive -> zip ** : __open__(file)
    zip ->> fileSystem ** : new(filePath)
    note left of fileSystem
        before new ZipArchive
        via FileSystems.newFileSystem()
        creates physical file
    end note

    Client -> archive : saveFiledsOf(\n  namedObject, version)

    loop properties of namedObject
        archive -> field ** : new(namedObject, \n  field)
        archive -> field : save(session)
        field -> zip : save(session, \n  entryName, \n  versionedValue)
        note right of field
            entryName: objName.fieldName
        end note

        zip -> zip : entry(entryName)
        zip -> fileSystem : getPath(entryName)
        return zipPath
        zip -> entry ** : new(zipPath)
        return zipEntry

        entry -> codec ** : new()
        note left of codec
            file-extension ->
                GzipCodec;
                ZipCodec;
                NullCodec;
        end note

        zip -> entry : BaseWritableResource\n::openForReading()
        entry -> entry : onOpenForWriting()

        entry -> fileSystem : newOutputStream(zipPath)
        note right fileSystem
            Files.newOutputStream(zipPath)
             -> provider.newOutputStream()
              -> zipPath.newOutputStream()
               -> zfs.newOutputStream()
        end note
        return outputStream

        entry -> codec : compressed(outputStream)
        return

        return
        return outputStream

        zip -> session : open(output)
        return
        zip -> session : write(versionedValue)
        return
        zip -> session : flush()
        return

        zip -> entry : close()
        return

        return
        return true
    end loop

    return

@enduml

PlantUML version 1.2021.7(Sun May 23 05:40:07 PDT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: Dynamic Code Evolution 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>
