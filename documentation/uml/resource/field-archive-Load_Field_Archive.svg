<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1870.8333px" preserveAspectRatio="none" style="width:1498px;height:1870px;background:#333333;" version="1.1" viewBox="0 0 1498 1870" width="1498.9583px" zoomAndPan="magnify"><defs/><g><rect fill="#48494B" height="41.2028" rx="8.3333" ry="8.3333" style="stroke:#545454;stroke-width:1.0416666666666667;" width="207.2917" x="647.6563" y="14.5833"/><text fill="#C0C0C0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="20.8333" lengthAdjust="spacing" textLength="184.375" x="659.1146" y="43.0583">Load Field Archive</text><rect fill="#3A3A3A" height="1099.4731" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="293.75" y="660.9375"/><rect fill="#3A3A3A" height="14.5833" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="527.6042" y="1567.1488"/><rect fill="#3A3A3A" height="35.555" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="527.6042" y="1617.2872"/><rect fill="#3A3A3A" height="14.5833" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="527.6042" y="1688.3972"/><rect fill="#3A3A3A" height="991.628" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="755.2083" y="746.9076"/><rect fill="#3A3A3A" height="182.312" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="760.4167" y="831.3741"/><rect fill="#3A3A3A" height="35.555" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="972.3958" y="872.1375"/><rect fill="#3A3A3A" height="116.6178" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="972.3958" y="1301.1576"/><rect fill="#3A3A3A" height="315.0879" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1170.3125" y="1216.5059"/><rect fill="#3A3A3A" height="228.3529" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1175.5208" y="1260.3943"/><rect fill="#3A3A3A" height="14.5833" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1393.2292" y="1453.3305"/><rect fill="#333333" height="1070.3064" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:2.0833333333333335;" width="1302.6042" x="190.625" y="676.5625"/><line style="stroke:#484848;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="32.2917" x2="32.2917" y1="155.2531" y2="1779.1606"/><line style="stroke:#484848;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="298.9583" x2="298.9583" y1="270.8415" y2="1779.1606"/><line style="stroke:#484848;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="532.2917" x2="532.2917" y1="392.7836" y2="1779.1606"/><line style="stroke:#484848;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="760.4167" x2="760.4167" y1="465.5599" y2="1779.1606"/><line style="stroke:#484848;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="977.0833" x2="977.0833" y1="529.7485" y2="1779.1606"/><line style="stroke:#484848;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="1175.5208" x2="1175.5208" y1="958.5368" y2="1779.1606"/><line style="stroke:#484848;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="1398.4375" x2="1398.4375" y1="1071.8221" y2="1779.1606"/><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="41.6667" x="8.3333" y="149.0519">Client</text><ellipse cx="32.2917" cy="76.6195" fill="#484848" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:2.0833333333333335;"/><path d="M32.2917,84.9528 L32.2917,113.0778 M18.75,93.2861 L45.8333,93.2861 M32.2917,113.0778 L18.75,128.7028 M32.2917,113.0778 L45.8333,128.7028 " fill="none" style="stroke:#484848;stroke-width:2.0833333333333335;"/><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="41.6667" x="8.3333" y="1795.343">Client</text><ellipse cx="32.2917" cy="1811.9609" fill="#484848" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:2.0833333333333335;"/><path d="M32.2917,1820.2942 L32.2917,1848.4192 M18.75,1828.6275 L45.8333,1828.6275 M32.2917,1848.4192 L18.75,1864.0442 M32.2917,1848.4192 L45.8333,1864.0442 " fill="none" style="stroke:#484848;stroke-width:2.0833333333333335;"/><rect fill="#484848" height="69.9056" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="112.5" x="242.7083" y="1778.1189"/><text fill="#000000" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="64.5833" x="266.6667" y="1800.6205">«resource»</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="51.0417" x="273.4375" y="1817.3564">archive</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="91.6667" x="253.125" y="1834.5317">:FieldArchive</text><rect fill="#484848" height="69.9056" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="167.7083" x="448.9583" y="1778.1189"/><text fill="#000000" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="84.375" x="490.625" y="1800.6205">«serialization»</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="53.125" x="506.25" y="1817.3564">session</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="146.875" x="459.375" y="1834.5317">:SerializationSession</text><rect fill="#484848" height="52.7303" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="100" x="710.4167" y="1778.1189"/><text fill="#000000" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="64.5833" x="728.125" y="1800.6205">«resource»</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="79.1667" x="720.8333" y="1817.3564">:ZipArchive</text><rect fill="#484848" height="52.7303" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="121.875" x="916.6667" y="1778.1189"/><text fill="#000000" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="37.5" x="958.8542" y="1800.6205">«java»</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="101.0417" x="927.0833" y="1817.3564">:ZipFileSystem</text><rect fill="#484848" height="52.7303" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="85.4167" x="1132.8125" y="1778.1189"/><text fill="#000000" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="64.5833" x="1143.2292" y="1800.6205">«resource»</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="62.5" x="1144.2708" y="1817.3564">:ZipEntry</text><rect fill="#484848" height="52.7303" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="85.4167" x="1355.7292" y="1778.1189"/><text fill="#000000" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="64.5833" x="1366.1458" y="1800.6205">«resource»</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="48.9583" x="1373.9583" y="1817.3564">:Codec</text><rect fill="#3A3A3A" height="1099.4731" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="293.75" y="660.9375"/><rect fill="#3A3A3A" height="14.5833" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="527.6042" y="1567.1488"/><rect fill="#3A3A3A" height="35.555" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="527.6042" y="1617.2872"/><rect fill="#3A3A3A" height="14.5833" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="527.6042" y="1688.3972"/><rect fill="#3A3A3A" height="991.628" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="755.2083" y="746.9076"/><rect fill="#3A3A3A" height="182.312" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="760.4167" y="831.3741"/><rect fill="#3A3A3A" height="35.555" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="972.3958" y="872.1375"/><rect fill="#3A3A3A" height="116.6178" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="972.3958" y="1301.1576"/><rect fill="#3A3A3A" height="315.0879" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1170.3125" y="1216.5059"/><rect fill="#3A3A3A" height="228.3529" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1175.5208" y="1260.3943"/><rect fill="#3A3A3A" height="14.5833" style="stroke:#484848;stroke-width:1.0416666666666667;" width="10.4167" x="1393.2292" y="1453.3305"/><path d="M37.5,179.2114 L37.5,205.2531 A8.3333,8.3333 0 0 0 45.8333,213.5864 L412.5,213.5864 A8.3333,8.3333 0 0 0 420.8333,205.2531 L420.8333,181.2948 L410.4167,170.8781 L45.8333,170.8781 A8.3333,8.3333 0 0 0 37.5,179.2114 " fill="#1B1B1A" style="stroke:#5E5E5E;stroke-width:1.0416666666666667;"/><path d="M410.4167,170.8781 L410.4167,177.1281 A4.1667,4.1667 0 0 0 414.5833,181.2948 L420.8333,181.2948 L410.4167,170.8781 " fill="#1B1B1A" style="stroke:#5E5E5E;stroke-width:1.0416666666666667;"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="142.7083" x="46.875" y="190.2893">file : kivakit.filesystem.File</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="355.2083" x="46.875" y="203.7842">sessionFactory : kivakit.serialization.SerializationSessionFactory</text><polygon fill="#545454" points="230.2083,257.5195,240.625,261.6862,230.2083,265.8529,234.375,261.6862" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="32.2917" x2="236.4583" y1="261.6862" y2="261.6862"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="30.2083" x="42.7083" y="239.1195">new(</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="129.1667" x="51.0417" y="253.8411">file, sessionFactory)</text><rect fill="#484848" height="69.9056" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="112.5" x="242.7083" y="219.7428"/><text fill="#000000" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="64.5833" x="266.6667" y="242.2445">«resource»</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="51.0417" x="273.4375" y="258.9803">archive</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="91.6667" x="253.125" y="276.1556">:FieldArchive</text><path d="M304.1667,314.6484 L304.1667,327.1484 A8.3333,8.3333 0 0 0 312.5,335.4818 L533.3333,335.4818 A8.3333,8.3333 0 0 0 541.6667,327.1484 L541.6667,316.7318 L531.25,306.3151 L312.5,306.3151 A8.3333,8.3333 0 0 0 304.1667,314.6484 " fill="#1B1B1A" style="stroke:#5E5E5E;stroke-width:1.0416666666666667;"/><path d="M531.25,306.3151 L531.25,312.5651 A4.1667,4.1667 0 0 0 535.4167,316.7318 L541.6667,316.7318 L531.25,306.3151 " fill="#1B1B1A" style="stroke:#5E5E5E;stroke-width:1.0416666666666667;"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="209.375" x="313.5417" y="325.7263">create lazy session by sessionFactory</text><line style="stroke:#545454;stroke-width:1.5625;" x1="446.875" x2="436.4583" y1="368.9067" y2="364.74"/><line style="stroke:#545454;stroke-width:1.5625;" x1="446.875" x2="436.4583" y1="368.9067" y2="373.0733"/><line style="stroke:#545454;stroke-width:1.5625;" x1="298.9583" x2="447.9167" y1="368.9067" y2="368.9067"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="34.375" x="309.375" y="361.0616">new()</text><rect fill="#484848" height="69.9056" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="167.7083" x="448.9583" y="341.685"/><text fill="#000000" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="84.375" x="490.625" y="364.1866">«serialization»</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="53.125" x="506.25" y="380.9224">session</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="146.875" x="459.375" y="398.0977">:SerializationSession</text><polygon fill="#545454" points="697.9167,446.1039,708.3333,450.2706,697.9167,454.4373,702.0833,450.2706" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="298.9583" x2="704.1667" y1="450.2706" y2="450.2706"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="32.2917" x="309.375" y="442.4255">open</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="29.1667" x="341.6667" y="442.4255">(file)</text><rect fill="#484848" height="52.7303" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="100" x="710.4167" y="423.0489"/><text fill="#000000" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="64.5833" x="728.125" y="445.5505">«resource»</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="79.1667" x="720.8333" y="462.2864">:ZipArchive</text><line style="stroke:#545454;stroke-width:1.5625;" x1="914.5833" x2="904.1667" y1="514.4592" y2="510.2926"/><line style="stroke:#545454;stroke-width:1.5625;" x1="914.5833" x2="904.1667" y1="514.4592" y2="518.6259"/><line style="stroke:#545454;stroke-width:1.5625;" x1="760.4167" x2="915.625" y1="514.4592" y2="514.4592"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="83.3333" x="770.8333" y="506.6142">new(filePath)</text><rect fill="#484848" height="52.7303" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="121.875" x="916.6667" y="487.2375"/><text fill="#000000" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="37.5" x="958.8542" y="509.7392">«java»</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="101.0417" x="927.0833" y="526.475">:ZipFileSystem</text><path d="M768.75,564.9679 L768.75,604.5512 A8.3333,8.3333 0 0 0 777.0833,612.8845 L963.5417,612.8845 A8.3333,8.3333 0 0 0 971.875,604.5512 L971.875,567.0512 L961.4583,556.6345 L777.0833,556.6345 A8.3333,8.3333 0 0 0 768.75,564.9679 " fill="#1B1B1A" style="stroke:#5E5E5E;stroke-width:1.0416666666666667;"/><path d="M961.4583,556.6345 L961.4583,562.8845 A4.1667,4.1667 0 0 0 965.625,567.0512 L971.875,567.0512 L961.4583,556.6345 " fill="#1B1B1A" style="stroke:#5E5E5E;stroke-width:1.0416666666666667;"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="125" x="778.125" y="576.0457">before new ZipArchive</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="175" x="778.125" y="589.5406">via FileSystems.newFileSystem()</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="109.375" x="778.125" y="603.0355">creates physical file</text><polygon fill="#545454" points="281.25,656.7708,291.6667,660.9375,281.25,665.1042,285.4167,660.9375" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="32.2917" x2="287.5" y1="660.9375" y2="660.9375"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="86.4583" x="42.7083" y="638.3708">loadFieldsOf(</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="89.5833" x="51.0417" y="653.0924">namedObject)</text><path d="M198.9583,676.5625 L272.9167,676.5625 L272.9167,689.0625 L262.5,699.4792 L190.625,699.4792 L190.625,684.8958 " fill="#484848" style="stroke:#484848;stroke-width:1.0416666666666667;"/><rect fill="none" height="1070.3064" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:2.0833333333333335;" width="1302.6042" x="190.625" y="676.5625"/><text fill="#0060A8" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="29.1667" x="209.375" y="692.8141">loop</text><text fill="#3380B9" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="182.2917" x="291.6667" y="693.8558">[properties of namedObject]</text><polygon fill="#545454" points="742.7083,742.7409,753.125,746.9076,742.7083,751.0742,746.875,746.9076" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="304.1667" x2="748.9583" y1="746.9076" y2="746.9076"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="85.4167" x="314.5833" y="724.3408">load(session,</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="73.9583" x="322.9167" y="739.0625">entryName)</text><path d="M309.375,768.7826 L309.375,781.2826 A8.3333,8.3333 0 0 0 317.7083,789.6159 L503.125,789.6159 A8.3333,8.3333 0 0 0 511.4583,781.2826 L511.4583,770.8659 L501.0417,760.4492 L317.7083,760.4492 A8.3333,8.3333 0 0 0 309.375,768.7826 " fill="#1B1B1A" style="stroke:#5E5E5E;stroke-width:1.0416666666666667;"/><path d="M501.0417,760.4492 L501.0417,766.6992 A4.1667,4.1667 0 0 0 505.2083,770.8659 L511.4583,770.8659 L501.0417,760.4492 " fill="#1B1B1A" style="stroke:#5E5E5E;stroke-width:1.0416666666666667;"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="173.9583" x="318.75" y="779.8604">entryName: objName.fieldName</text><line style="stroke:#545454;stroke-width:1.5625;" x1="765.625" x2="814.5833" y1="817.8324" y2="817.8324"/><line style="stroke:#545454;stroke-width:1.5625;" x1="814.5833" x2="814.5833" y1="817.8324" y2="831.3741"/><line style="stroke:#545454;stroke-width:1.5625;" x1="771.875" x2="814.5833" y1="831.3741" y2="831.3741"/><polygon fill="#545454" points="782.2917,827.2074,771.875,831.3741,782.2917,835.5408,778.125,831.3741" style="stroke:#545454;stroke-width:1.0416666666666667;"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="111.4583" x="781.25" y="809.9874">entry(entryName)</text><polygon fill="#545454" points="959.8958,867.9708,970.3125,872.1375,959.8958,876.3041,964.0625,872.1375" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="770.8333" x2="966.1458" y1="872.1375" y2="872.1375"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="127.0833" x="781.25" y="864.2924">getPath(entryName)</text><polygon fill="#545454" points="782.2917,903.5258,771.875,907.6925,782.2917,911.8591,778.125,907.6925" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="776.0417" x2="976.5625" y1="907.6925" y2="907.6925"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="47.9167" x="791.6667" y="899.8474">zipPath</text><polygon fill="#545454" points="1120.3125,939.0808,1130.7292,943.2475,1120.3125,947.4141,1124.4792,943.2475" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="770.8333" x2="1126.5625" y1="943.2475" y2="943.2475"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="82.2917" x="781.25" y="935.4024">new(zipPath)</text><rect fill="#484848" height="52.7303" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="85.4167" x="1132.8125" y="916.0258"/><text fill="#000000" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="64.5833" x="1143.2292" y="938.5274">«resource»</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="62.5" x="1144.2708" y="955.2633">:ZipEntry</text><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="770.8333" x2="814.5833" y1="1012.6444" y2="1012.6444"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="814.5833" x2="814.5833" y1="1012.6444" y2="1026.1861"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="765.625" x2="814.5833" y1="1026.1861" y2="1026.1861"/><polygon fill="#545454" points="776.0417,1022.0194,765.625,1026.1861,776.0417,1030.3528,771.875,1026.1861" style="stroke:#545454;stroke-width:1.0416666666666667;"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="53.125" x="781.25" y="1004.7994">zipEntry</text><polygon fill="#545454" points="1343.2292,1052.3661,1353.6458,1056.5328,1343.2292,1060.6995,1347.3958,1056.5328" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="1175.5208" x2="1349.4792" y1="1056.5328" y2="1056.5328"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="34.375" x="1185.9375" y="1048.6877">new()</text><rect fill="#484848" height="52.7303" rx="8.3333" ry="8.3333" style="stroke:#484848;stroke-width:1.5625;" width="85.4167" x="1355.7292" y="1029.3111"/><text fill="#000000" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="64.5833" x="1366.1458" y="1051.8127">«resource»</text><text fill="#C8AC00" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="14.5833" lengthAdjust="spacing" text-decoration="underline" textLength="48.9583" x="1373.9583" y="1068.5486">:Codec</text><path d="M1267.7083,1107.0414 L1267.7083,1160.1664 A8.3333,8.3333 0 0 0 1276.0417,1168.4998 L1384.375,1168.4998 A8.3333,8.3333 0 0 0 1392.7083,1160.1664 L1392.7083,1109.1248 L1382.2917,1098.7081 L1276.0417,1098.7081 A8.3333,8.3333 0 0 0 1267.7083,1107.0414 " fill="#1B1B1A" style="stroke:#5E5E5E;stroke-width:1.0416666666666667;"/><path d="M1382.2917,1098.7081 L1382.2917,1104.9581 A4.1667,4.1667 0 0 0 1386.4583,1109.1248 L1392.7083,1109.1248 L1382.2917,1098.7081 " fill="#1B1B1A" style="stroke:#5E5E5E;stroke-width:1.0416666666666667;"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="96.875" x="1277.0833" y="1118.1193">file-extension -&gt;</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="63.5417" x="1289.5833" y="1131.6142">GzipCodec;</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="56.25" x="1289.5833" y="1145.109">ZipCodec;</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="60.4167" x="1289.5833" y="1158.6039">NullCodec;</text><polygon fill="#545454" points="1157.8125,1212.3393,1168.2292,1216.5059,1157.8125,1220.6726,1161.9792,1216.5059" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="765.625" x2="1164.0625" y1="1216.5059" y2="1216.5059"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="146.875" x="776.0417" y="1193.9392">BaseReadableResource</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="119.7917" x="776.0417" y="1208.6609">::openForReading()</text><line style="stroke:#545454;stroke-width:1.5625;" x1="1180.7292" x2="1229.6875" y1="1246.8526" y2="1246.8526"/><line style="stroke:#545454;stroke-width:1.5625;" x1="1229.6875" x2="1229.6875" y1="1246.8526" y2="1260.3943"/><line style="stroke:#545454;stroke-width:1.5625;" x1="1186.9792" x2="1229.6875" y1="1260.3943" y2="1260.3943"/><polygon fill="#545454" points="1197.3958,1256.2276,1186.9792,1260.3943,1197.3958,1264.561,1193.2292,1260.3943" style="stroke:#545454;stroke-width:1.0416666666666667;"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="132.2917" x="1196.3542" y="1239.0076">onOpenForReading()</text><polygon fill="#545454" points="994.2708,1296.991,983.8542,1301.1576,994.2708,1305.3243,990.1042,1301.1576" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="988.0208" x2="1174.4792" y1="1301.1576" y2="1301.1576"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="161.4583" x="1003.6458" y="1293.3126">newInputStream(zipPath)</text><path d="M987.5,1323.0326 L987.5,1376.1576 A8.3333,8.3333 0 0 0 995.8333,1384.491 L1178.125,1384.491 A8.3333,8.3333 0 0 0 1186.4583,1376.1576 L1186.4583,1325.116 L1176.0417,1314.6993 L995.8333,1314.6993 A8.3333,8.3333 0 0 0 987.5,1323.0326 " fill="#1B1B1A" style="stroke:#5E5E5E;stroke-width:1.0416666666666667;"/><path d="M1176.0417,1314.6993 L1176.0417,1320.9493 A4.1667,4.1667 0 0 0 1180.2083,1325.116 L1186.4583,1325.116 L1176.0417,1314.6993 " fill="#1B1B1A" style="stroke:#5E5E5E;stroke-width:1.0416666666666667;"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="166.6667" x="996.875" y="1334.1105">Files.newInputStream(zipPath)</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="167.7083" x="1000" y="1347.6054">-&gt; provider.newInputStream()</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="160.4167" x="1003.125" y="1361.1003">-&gt; zipPath.newInputStream()</text><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="11.4583" lengthAdjust="spacing" textLength="136.4583" x="1006.25" y="1374.5951">-&gt; zfs.newInputStream()</text><polygon fill="#545454" points="1163.0208,1413.6088,1173.4375,1417.7755,1163.0208,1421.9421,1167.1875,1417.7755" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="977.6042" x2="1169.2708" y1="1417.7755" y2="1417.7755"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="79.1667" x="988.0208" y="1409.9304">inputStream</text><polygon fill="#545454" points="1380.7292,1449.1638,1391.1458,1453.3305,1380.7292,1457.4972,1384.8958,1453.3305" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="1185.9375" x2="1386.9792" y1="1453.3305" y2="1453.3305"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="181.25" x="1196.3542" y="1445.4854">decompressed(inputStream)</text><polygon fill="#545454" points="1197.3958,1463.7472,1186.9792,1467.9138,1197.3958,1472.0805,1193.2292,1467.9138" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="1191.1458" x2="1397.3958" y1="1467.9138" y2="1467.9138"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="1185.9375" x2="1229.6875" y1="1487.7055" y2="1487.7055"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="1229.6875" x2="1229.6875" y1="1487.7055" y2="1501.2472"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="1180.7292" x2="1229.6875" y1="1501.2472" y2="1501.2472"/><polygon fill="#545454" points="1191.1458,1497.0805,1180.7292,1501.2472,1191.1458,1505.4138,1186.9792,1501.2472" style="stroke:#545454;stroke-width:1.0416666666666667;"/><polygon fill="#545454" points="777.0833,1527.4272,766.6667,1531.5938,777.0833,1535.7605,772.9167,1531.5938" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="770.8333" x2="1174.4792" y1="1531.5938" y2="1531.5938"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="79.1667" x="786.4583" y="1523.7488">inputStream</text><polygon fill="#545454" points="549.4792,1562.9822,539.0625,1567.1488,549.4792,1571.3155,545.3125,1567.1488" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="543.2292" x2="754.1667" y1="1567.1488" y2="1567.1488"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="75" x="558.8542" y="1559.3038">open(input)</text><polygon fill="#545454" points="742.7083,1577.5655,753.125,1581.7322,742.7083,1585.8988,746.875,1581.7322" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="532.8125" x2="748.9583" y1="1581.7322" y2="1581.7322"/><polygon fill="#545454" points="549.4792,1613.1205,539.0625,1617.2872,549.4792,1621.4539,545.3125,1617.2872" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="543.2292" x2="754.1667" y1="1617.2872" y2="1617.2872"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="36.4583" x="558.8542" y="1609.4421">read()</text><polygon fill="#545454" points="742.7083,1648.6755,753.125,1652.8422,742.7083,1657.0089,746.875,1652.8422" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="532.8125" x2="748.9583" y1="1652.8422" y2="1652.8422"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="98.9583" x="543.2292" y="1644.9972">versionedValue</text><polygon fill="#545454" points="549.4792,1684.2306,539.0625,1688.3972,549.4792,1692.5639,545.3125,1688.3972" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;" x1="543.2292" x2="754.1667" y1="1688.3972" y2="1688.3972"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="41.6667" x="558.8542" y="1680.5522">close()</text><polygon fill="#545454" points="742.7083,1698.8139,753.125,1702.9806,742.7083,1707.1472,746.875,1702.9806" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="532.8125" x2="748.9583" y1="1702.9806" y2="1702.9806"/><polygon fill="#545454" points="315.625,1734.3689,305.2083,1738.5356,315.625,1742.7022,311.4583,1738.5356" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="309.375" x2="759.375" y1="1738.5356" y2="1738.5356"/><text fill="#A0A0A0" font-family="Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="26.0417" x="325" y="1730.6905">true</text><polygon fill="#545454" points="43.75,1756.2439,33.3333,1760.4106,43.75,1764.5772,39.5833,1760.4106" style="stroke:#545454;stroke-width:1.0416666666666667;"/><line style="stroke:#545454;stroke-width:1.5625;stroke-dasharray:2.0,2.0;" x1="37.5" x2="297.9167" y1="1760.4106" y2="1760.4106"/><!--MD5=[08ecde4faa2fa32e8063685f1ab14b89]
@startuml

    !include ../lexakai.theme

    title "Load Field Archive"

    autoactivate on

    actor Client
    participant "archive\n:FieldArchive" as archive <<resource>>
    participant "session\n:SerializationSession" as session <<serialization>>
    participant ":ZipArchive" as zip <<resource>>
    participant ":ZipFileSystem" as fileSystem <<java>>
    participant ":ZipEntry" as entry <<resource>>
    participant ":Codec" as codec <<resource>>

    note right of Client
        file : kivakit.filesystem.File
        sessionFactory : kivakit.serialization.SerializationSessionFactory
    end note
    Client -> archive ** : new(\n  file, sessionFactory)

    note right archive
        create lazy session by sessionFactory
    end note
    archive ->> session ** : new()

    archive -> zip ** : __open__(file)
    zip ->> fileSystem ** : new(filePath)
    note left of fileSystem
        before new ZipArchive
        via FileSystems.newFileSystem()
        creates physical file
    end note

    Client -> archive : loadFieldsOf(\n  namedObject)

    loop properties of namedObject
        archive -> zip : load(session, \n  entryName)
        note right of archive
            entryName: objName.fieldName
        end note

        zip -> zip : entry(entryName)
        zip -> fileSystem : getPath(entryName)
        return zipPath
        zip -> entry ** : new(zipPath)
        return zipEntry

        entry -> codec ** : new()
        note left of codec
            file-extension ->
                GzipCodec;
                ZipCodec;
                NullCodec;
        end note

        zip -> entry : BaseReadableResource\n::openForReading()
        entry -> entry : onOpenForReading()

        entry -> fileSystem : newInputStream(zipPath)
        note right fileSystem
            Files.newInputStream(zipPath)
             -> provider.newInputStream()
              -> zipPath.newInputStream()
               -> zfs.newInputStream()
        end note
        return inputStream

        entry -> codec : decompressed(inputStream)
        return

        return
        return inputStream

        zip -> session : open(input)
        return
        zip -> session : read()
        return versionedValue
        zip -> session : close()
        return

        return true
    end loop

    return

@enduml

@startuml









skinparam backgroundColor #333333






skinparam  {
    defaultFontName   "Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif"
    defaultFontSize   12
    defaultTextAlignment left
    shadowing false
    RoundCorner 10
    TitleFontSize 18
}

skinparam defaultFontName       "Open Sans,Avenir,Nunito,Arial,Helvetica,SansSerif"
skinparam defaultFontSize       12
skinparam dpi                   100
skinparam shadowing             false
skinparam roundcorner           16
skinparam ParticipantPadding    40
skinparam BoxPadding            40
skinparam Padding               3
skinparam ArrowColor            #545454
skinparam stereotype {
    CBackgroundColor #0066cf
    CBorderColor #0086ef
    ABackgroundColor #C8Ac00
    ABorderColor #D8Bc00
    IBackgroundColor #008400
    IBorderColor #239c23
    EBackgroundColor #cf6300
    EBorderColor #ef8300
    NBackgroundColor #3380b9
    NBorderColor #004d86
}
skinparam title {
	FontColor	                 #c0c0c0
 	BorderColor                  #545454
	FontSize	    	         20
	BorderRoundCorner            16
	BorderThickness 	         1
	BackgroundColor              #48494b
}


skinparam legend {
	BackgroundColor #303030
	BorderColor #404040
	FontColor #a0a0a0
}

	skinparam swimlane {
	BorderColor #5e5e5e
	BorderThickness 2
	TitleBackgroundColor  #6d6d6d-#484848
	TitleFontColor #303030
}

skinparam activity {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
	BarColor #00FF00
	StartColor #0060a8
	EndColor #0060a8
	DiamondBackgroundColor #6d6d6d-#3a3a3a
  	DiamondBorderColor #3a3a3a
  	DiamondFontColor #fefefe
}


skinparam participant {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
	ParticipantBorderThickness 2
}


skinparam actor {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
}


skinparam arrow {
	Thickness 1.5
	Color #545454
	FontColor #a0a0a0
    FontStyle bold
    MessageAlignment center
}



skinparam sequence {
	BorderColor #303030
	TitleFontColor #303030
	BackgroundColor #333333
	StartColor #303030
	EndColor #303030
	BoxBackgroundColor #333333
	BoxBorderColor #484848
	BoxFontColor #484848
	LifeLineBorderColor #484848
	LifeLineBorderThickness 2
	LifeLineBackgroundColor #3a3a3a
	GroupBorderColor #484848
	GroupFontColor #3380b9
	GroupHeaderFontColor #0060a8
	GroupBackgroundColor #484848
	GroupHeaderBackgroundColor #333333
	DividerBackgroundColor #484848
    DividerBorderColor #484848
    DividerBorderThickness 2
    DividerFontColor #D8Bc00
	ReferenceBackgroundColor #333333
	ReferenceBorderColor #484848
	ReferenceFontColor #fefefe
	ReferenceHeaderBackgroundColor #484848
    Participant underline
    ParticipantBackgroundColor #484848
    ParticipantBorderColor #484848
    ParticipantFontSize 14
    ActorBorderColor #484848
    ActorBackgroundColor #484848
    ActorFontSize 14
}


skinparam partition {
	BorderColor #303030
	FontColor #333333
	BackgroundColor #333333
}


skinparam collections {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
}


skinparam control {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
}


skinparam entity {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
}


skinparam boundary {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
}


skinparam agent {
	BackgroundColor #ff8000
	BorderColor #ff9933
	FontColor #484848
}


skinparam note {
	BorderThickness 1
	BackgroundColor #1b1b1a
	BorderColor #5e5e5e
	FontSize 11
	FontColor #a0a0a0
}


skinparam artifact {
	BorderThickness 10
	BorderColor #5e5e5e
	BackgroundColor #1b1b1a
	FontColor #D8Bc00
}


skinparam component {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
}


skinparam interface {
	BackgroundColor  #008400
	BorderColor  #007F00
	FontColor #484848
}


skinparam storage {
	BackgroundColor #ff8000
  	BorderColor #cc6600
	FontColor #222222
}


skinparam node {
	BackgroundColor #333333
	BorderColor #333333
	FontColor #C8Ac00
}


skinparam cloud {
	BackgroundColor #484848-black
	BorderColor #484848
	FontColor #D8Bc00
}


skinparam database {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
	BackgroundColor  #333333
}


skinparam class {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
	HeaderBackgroundColor #1b1b1a
    BackgroundColor #282828
    BorderColor #5e5e5e
 	StereotypeFontColor #a0a0a0
    StereotypeFontStyle bold
	BorderThickness 1
	AttributeFontColor #D8Bc00
	AttributeFontSize 11
    FontColor #D8Bc00
    FontStyle bold
}


skinparam object {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
	StereotypeFontColor #484848
	BorderThickness 1
	AttributeFontColor #fefefe
	AttributeFontSize 11
}


skinparam usecase {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
	BorderThickness 2
	StereotypeFontColor #303030
}


skinparam rectangle {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
	BackgroundColor #333333
	BorderThickness 2
	StereotypeFontColor #303030
}


skinparam package {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
	BackgroundColor #333333
	BorderColor #5e5e5e
	BorderStyle dashed
	Style rectangle
}


skinparam folder {
	BackgroundColor #6d6d6d
  	BorderColor #ff8000
	FontColor #ff8000
	BorderThickness 2
}


skinparam frame {
	BackgroundColor #6d6d6d
  	BorderColor #0060a8
	FontColor #0060a8
	BorderThickness 2
}


skinparam state {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
	StartColor #0060a8
	EndColor #0060a8
	AttributeFontColor #fefefe
	AttributeFontSize 11
}


skinparam queue {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
}


skinparam card {
	BackgroundColor #0060a8
	BorderColor #004d86
	FontColor $INFO_TEXT
}


skinparam file {
	BackgroundColor #6d6d6d-#484848
	BorderColor #0060a8
	FontColor #fefefe
}


skinparam stack {
		FontColor #C8Ac00
	BorderColor #333333
	BackgroundColor #333333-#333333
}


    title "Load Field Archive"

    autoactivate on

    actor Client
    participant "archive\n:FieldArchive" as archive <<resource>>
    participant "session\n:SerializationSession" as session <<serialization>>
    participant ":ZipArchive" as zip <<resource>>
    participant ":ZipFileSystem" as fileSystem <<java>>
    participant ":ZipEntry" as entry <<resource>>
    participant ":Codec" as codec <<resource>>

    note right of Client
        file : kivakit.filesystem.File
        sessionFactory : kivakit.serialization.SerializationSessionFactory
    end note
    Client -> archive ** : new(\n  file, sessionFactory)

    note right archive
        create lazy session by sessionFactory
    end note
    archive ->> session ** : new()

    archive -> zip ** : __open__(file)
    zip ->> fileSystem ** : new(filePath)
    note left of fileSystem
        before new ZipArchive
        via FileSystems.newFileSystem()
        creates physical file
    end note

    Client -> archive : loadFieldsOf(\n  namedObject)

    loop properties of namedObject
        archive -> zip : load(session, \n  entryName)
        note right of archive
            entryName: objName.fieldName
        end note

        zip -> zip : entry(entryName)
        zip -> fileSystem : getPath(entryName)
        return zipPath
        zip -> entry ** : new(zipPath)
        return zipEntry

        entry -> codec ** : new()
        note left of codec
            file-extension ->
                GzipCodec;
                ZipCodec;
                NullCodec;
        end note

        zip -> entry : BaseReadableResource\n::openForReading()
        entry -> entry : onOpenForReading()

        entry -> fileSystem : newInputStream(zipPath)
        note right fileSystem
            Files.newInputStream(zipPath)
             -> provider.newInputStream()
              -> zipPath.newInputStream()
               -> zfs.newInputStream()
        end note
        return inputStream

        entry -> codec : decompressed(inputStream)
        return

        return
        return inputStream

        zip -> session : open(input)
        return
        zip -> session : read()
        return versionedValue
        zip -> session : close()
        return

        return true
    end loop

    return

@enduml

PlantUML version 1.2021.7(Sun May 23 05:40:07 PDT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: Dynamic Code Evolution 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>
